# 软件设计的七大原则

## Principle 1 : 开闭原则（Open Close Principle, OCP）

内容：对扩展开放，对修改关闭
实现方式： 抽象约束，封装变化
具体实例： Windows主题、网站主题，抽象主题的共同特点为抽象类，
将每个具体主题作为其子类，用户可根据需要选择或者增加新的主题而不需要修改源码。
所以它满足开闭原则


## Principle 2 : 里氏替换原则(Liskov Substitution Principle, LSP)
内容： 继承必须确保超类所拥有的性质在子类中仍然成立，主要阐述了有关继承的一些原则，也就是什么时候应该使用继承，什么时候不应该使用继承，

实现方式：
* 子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法
* 子类中可以增加自己特有的方法
* 当子类的方法重载父类的方法时，方法的前置条件（即方法的输入参数）要比父类的方法更宽松
* 当子类的方法实现父类的方法时（重写/重载或实现抽象方法），方法的后置条件（即方法的的输出/返回值）要比父类的方法更严格或相等

具体实例：
* 几维鸟不是鸟
* 正方形不是长方形

## Principle 3 : 依赖倒置原则 (Dependence Inversion Principle, DIP)
内容：高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象

其核心思想是：要面向接口编程，不要面向实现编程

依赖倒置原则是实现开闭原则的重要途径之一，它降低了客户与实现模块之间的耦合。

作用：
* 依赖倒置原则可以降低类间的耦合性。
* 依赖倒置原则可以提高系统的稳定性。
* 依赖倒置原则可以减少并行开发引起的风险。
* 依赖倒置原则可以提高代码的可读性和可维护性。

实现方法：面向接口编程
1. 每个类尽量提供接口或抽象类，或者两者都具备。
2. 变量的声明类型尽量是接口或者是抽象类。
3. 任何类都不应该从具体类派生。
4. 使用继承时尽量遵循里氏替换原则。



## Principle 4 : 单一职责原则 (Single Responsibility Principle, SRP)
主要内容：一个类应该有且仅有一个引起它变化的原因，否则类应该被拆分

对象不应该承担太多职责，如果一个对象承担了太多的职责，至少存在以下两个缺点：
1. 一个职责的变化可能会削弱或者抑制这个类实现其他职责的能力；
2. 当客户端需要该对象的某一个职责时，不得不将其他不需要的职责全都包含进来，从而造成冗余代码或代码的浪费。

优点：

单一职责原则的核心就是控制类的粒度大小、将对象解耦、提高其内聚性。如果遵循单一职责原则将有以下优点。
* 降低类的复杂度。一个类只负责一项职责，其逻辑肯定要比负责多项职责简单得多。
* 提高类的可读性。复杂性降低，自然其可读性会提高。
* 提高系统的可维护性。可读性提高，那自然更容易维护了。
* 变更引起的风险降低。变更是必然的，如果单一职责原则遵守得好，当修改一个功能时，可以显著降低对其他功能的影响。

接口一定要做到单一职责，类的设计尽量做到只有一个原因引起变化


## Principle 5 : 接口隔离原则（Interface Segregation Principle, ISP）
内容：要求程序员尽量将臃肿庞大的接口拆分成更小的和更具体的接口，让接口中只包含客户感兴趣的方法。

定义：客户端不应该被迫依赖于它不使用的方法

定义：一个类对另一个类的依赖应该建立在最小的接口上

含义：要为各个类建立它们需要的专用接口，而不要试图去建立一个很庞大的接口供所有依赖它的类去调用。

优点：
* 将臃肿庞大的接口分解为多个粒度小的接口，可以预防外来变更的扩散，提高系统的灵活性和可维护性。
* 接口隔离提高了系统的内聚性，减少了对外交互，降低了系统的耦合性。
* 如果接口的粒度大小定义合理，能够保证系统的稳定性；但是，如果定义过小，则会造成接口数量过多，使设计复杂化；如果定义太大，灵活性降低，无法提供定制服务，给整体项目带来无法预料的风险。
* 使用多个专门的接口还能够体现对象的层次，因为可以通过接口的继承，实现对总接口的定义。
* 能减少项目工程中的代码冗余。过大的大接口里面通常放置许多不用的方法，当实现这个接口的时候，被迫设计冗余的代码。

实例：
学生成绩管理程序一般包含插入成绩、删除成绩、修改成绩、计算总分、计算均分、打印成绩信息、査询成绩信息等功能，
如果将这些功能全部放到一个接口中显然不太合理，正确的做法是将它们分别放在输入模块、统计模块和打印模块等 3 个模块中，


## 一句话总结软件设计的七大原则
| 设计原则 | 一句话归纳 | 目的 |
| ---- | ---- | ---- |
| 开闭原则 | 对扩展开放，对修改关闭 | 降低维护带来的新风险 |
| 依赖倒置原则 | 高层不应该依赖低层，要面向接口编程 | 更利于代码结构的升级扩展 |
| 单一接口原则 | 一个类只干一件事，实现类要单一 | 便于理解，提高代码的可读性 |
| 接口隔离原则 | 一个接口只干一件事，接口要精简单一 | 功能解耦，高聚合、低耦合 |
| 迪米特法则 | 不该知道的不要知道，一个类应该保持对其它对象最少的了解，降低耦合度 | 只和朋友交流，不和陌生人说话，减少代码臃肿 |
| 里氏替换原则 | 不要破坏继承体系，子类重写方法功能发生改变，不应该影响父类方法的含义 | 防止继承泛滥 |
| 合成复用原则 | 尽量使用组合或者聚合关系实现代码复用，少使用继承 | 降低代码耦合 |

记忆口诀：访问加限制，函数要节俭，依赖不允许，动态加接口，父类要抽象，扩展不更改。
